{% extends 'OroDashboardBundle:Dashboard:tabbedWidget.html.twig' %}
{% import 'OroEmailBundle::macros.html.twig' as Email %}

{% if unreadInboxMailCount > 0 %}
    {% set unreadInboxMailCount %}
        <div class="email-mail-count-circle">{{ unreadInboxMailCount }}</div>
    {% endset %}
{% else %}
    {% set unreadInboxMailCount = '' %}
{% endif %}

{% block content %}
    {% set tabs = [{
        'url': path(
            'oro_email_dashboard_recent_emails',
            {'widget': widgetName, 'activeTab': 'inbox', 'contentType': 'tab'}
        ),
        'name': 'inbox',
        'label': 'oro.dashboard.recent_emails.inbox'|trans,
        'afterHtml': unreadInboxMailCount
    },
    {
        'url': path(
            'oro_email_dashboard_recent_emails',
            {'widget': widgetName, 'activeTab': 'sent', 'contentType': 'tab'}
        ),
        'name': 'sent',
        'label': 'oro.dashboard.recent_emails.sent'|trans
    },
    {
        'url': path(
            'oro_email_dashboard_recent_emails',
            {'widget': widgetName, 'activeTab': 'new', 'contentType': 'tab'}
        ),
        'name': 'new',
        'label': 'oro.dashboard.recent_emails.new'|trans
    }] %}

    {{ parent() }}
{% endblock %}

{% block actions %}
    {% set actions = [{
        'url': path('oro_user_view', {'id': loggedUserId}),
        'type': 'link',
        'label': 'oro.dashboard.recent_emails.view_all'|trans
    }] %}

    {{ parent() }}
{% endblock %}
