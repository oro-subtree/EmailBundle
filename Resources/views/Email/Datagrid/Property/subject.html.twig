
{% import 'OroUIBundle::macros.html.twig' as UI %}

{% set emailId = record.getValue('id') %}
{{ UI.clientLink({
    'dataUrl': path('oro_email_view', {id: emailId}),
    'aCss': 'no-hash',
    'label' : value|default('oro.ui.empty'|trans),
    'widget' : {
        'type' : 'dialog',
        'multiple' : false,
        'options' : {
            'alias': 'email_info_widget_' ~ emailId,
            'dialogOptions' : {
                'title' : value,
                'allowMaximize': true,
                'allowMinimize': true,
                'dblclick': 'maximize',
                'maximizedHeightDecreaseBy': 'minimize-bar',
                'width': 600
            }
        }
    },
}) }}
{% set thread = record.getValue('thread') %}
{% if thread is not null and thread.getLastUnseenEmail is not null %}
    {{ thread.getLastUnseenEmail.getSubject() }}
{% endif %}
